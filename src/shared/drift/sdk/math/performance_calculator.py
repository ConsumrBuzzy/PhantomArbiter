"""
Performance Calculator
=====================

Shared performance calculations for all trading engines.
Provides comprehensive performance metrics, risk-adjusted returns, and attribution analysis.

Features:
- Return calculations (total, annualized, compound)
- Risk-adjusted metrics (Sharpe, Sortino, Calmar ratios)
- Drawdown analysis and tracking
- Performance attribution analysis
- Benchmark comparison metrics
- Trade statistics and analysis
"""

import math
from t